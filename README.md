# Hybrid-Chain Design Prototype
```css
Project/
â”‚
â””â”€â”€ Code/
â”‚   â”œâ”€â”€ MerkleTree.cpp
â”‚   â”œâ”€â”€ To be continued ......
â”‚   â””â”€â”€ build/
â”‚       â”œâ”€â”€ MerkleTree
â”‚       â”œâ”€â”€ ......
â”‚       â””â”€â”€inp.txt
â””â”€â”€ Content/
    â”œâ”€â”€ GeneralDesign.drawio
    â”œâ”€â”€ OverallStructure.drawio
    â”œâ”€â”€ PrivateChainExample.drawio
    â””â”€â”€ HybridChainExample.drawio
```
## Code
### Merkle Tree

C++ 17 and OpenSSL to implement a foundamental Merkle Tree.
#### Build Instructions:
Run the following commands in the directory containing ```CMakeLists.txt``` and ```MerkleTree.cpp```:
```bash
mkdir build
cd build
cmake ..
make
```
(I have done this stpe in the repo ËƒÊË‚ )

After the executable is generated:

``` bash
./MerkleTree
```

#### Input
During execution, the program reads:
```bash
inp.txt
```
from the current working directory.

Since running the executable inside the ```build/``` directory, ```inp.txt``` must be placed inside the build directory (I also did this in the repo âœŒï¸( á› )âœŒï¸).

Example directory structure:
```css
Code/
â”‚
â”œâ”€â”€ MerkleTree.cpp
â”œâ”€â”€ CMakeLists.txt
â”‚
â””â”€â”€ build/
    â”œâ”€â”€ MerkleTree    â† Executable
    â””â”€â”€ inp.txt       â† Input file must be here :)
```
##### Why?ğŸ¤”

Because what I did in the ```cpp``` file is:
```cpp
T.Build("inp.txt");
```
So you have no other choiceğŸ˜, unless you change it(but what do you want to doğŸ™€)

Therefore, the file must exist in the directory where the executable is run.

#### Menu
After launching, the following menu appears:
```
A)dd a new block
R)equest a block
V)erify the proof
T)raverse the tree
Q)uit
```
*A â€” Add a new block*

Appends the block content to the bottom of the tree and updates hashes from bottom to top.

*R â€” Request a block (Generate proof)*

Enter a block number to output its Merkle proof string.

*V â€” Verify the proof*

Uses the proof generated by the last R command to perform verification.

*T â€” Traverse the tree*

Prints all leaf block IDs and their corresponding SHA-256 hashes.

Structure Overview

- Node

    - Stores blockID, data value, hashValue

    - Pointers: left / right / parent

- MerkleTree

    - Reads fixed-size blocks from a file

    - Uses OpenSSL to compute SHA-256

    - Builds a complete binary tree

    - Supports appending new blocks

    - Supports generating and verifying Merkle proofs

    - Supports printing leaf nodes

#### Potential Problems
Also list in the comment in the codeğŸ˜¢:
```cpp
/*
1. Append() assumes the tree is a complete binary tree
It relies on every left/right child existing; 
it fails when the initial tree (built from input) is not complete, leading to null pointer access.

2. levels and blockNo are calculated incorrectly
The computed levels do not match the real tree height; 
path traversal during append becomes incorrect and leads to invalid pointer access.

3. Append algorithm is hard-coded and non-general
It works only for perfect binary trees; 
it breaks as soon as the tree structure deviates, such as with small or uneven input.

4. Proof format is non-standard
It mixes raw values and hashes; 
it is incompatible with proper Merkle proof formats used in real systems.

5. No boundary or safety checks
Null pointers, incomplete paths, empty input, and malformed proofs are never validated; 
errors lead directly to crashes.

6. Memory is never freed
All nodes allocated with new are leaked; 
acceptable in a demo but a clear flaw in implementation.

*/
```

Optimization is on its way ğŸ§¯ (I hope so ğŸ˜†)

## Content